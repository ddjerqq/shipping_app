@using System.ComponentModel.DataAnnotations
@inherits UiComponentBase
@inject IJSRuntime Js

<Button Variant="@Variant"
        @onclick="@OnClick"
        title="@Content"
        type="button"
        @attributes="AdditionalAttributes">
    @if (Copied)
    {
        @:Copied!
    }
    else
    {
        @ChildContent
    }
</Button>

@code {
    private bool Copied { get; set; } = false;

    [Parameter, EditorRequired]
    public string Content { get; set; } = null!;

    [Parameter]
    [AllowedValues("default", "destructive", "outline", "secondary", "ghost", "link")]
    public string Variant { get; set; } = "default";

    [Parameter]
    [AllowedValues("default", "sm", "lg", "icon")]
    public string Size { get; set; } = "default";

    private async Task OnClick(MouseEventArgs args)
    {
        Copied = true;
        await Js.InvokeVoidAsync("navigator.clipboard.writeText", Content);
        await Task.Delay(750);
        Copied = false;
    }
}
